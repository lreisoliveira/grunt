describe("Player",function(){var a,b,c=require("../../lib/Player"),d=require("../../lib/Song");beforeEach(function(){a=new c,b=new d}),it("should be able to play a Song",function(){a.play(b),expect(a.currentlyPlayingSong).toEqual(b),expect(a).toBePlaying(b)}),describe("when song has been paused",function(){beforeEach(function(){a.play(b),a.pause()}),it("should indicate that the song is currently paused",function(){expect(a.isPlaying).toBeFalsy(),expect(a).not.toBePlaying(b)}),it("should be possible to resume",function(){a.resume(),expect(a.isPlaying).toBeTruthy(),expect(a.currentlyPlayingSong).toEqual(b)})}),it("tells the current song if the user has made it a favorite",function(){spyOn(b,"persistFavoriteStatus"),a.play(b),a.makeFavorite(),expect(b.persistFavoriteStatus).toHaveBeenCalledWith(!0)}),describe("#resume",function(){it("should throw an exception if song is already playing",function(){a.play(b),expect(function(){a.resume()}).toThrowError("song is already playing")})})});